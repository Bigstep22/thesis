\section{Agda Formalization of the Optimization}\label{sec:formalization}
In \cite{Harper2011}'s work ``A Library Writer's Guide to Shortcut Fusion'', he describes the practice of implementing Church and Cochurch encodings, as well a paper proof necessary to show that the encodings employed are correct.
In this section I discuss the work I have done to formalize these proofs in the programming language Agda, as well as additional proofs to support the claims made in the paper.

The code can be presented in roughly 2 parts:
\begin{itemize}[noitemsep]
  \item The proofs of the category theory truths, as described by Harper
  \item The proofs about the (Co)Church encodings, again as described by Harper
\end{itemize}

The Agda code makes use of two libraries: agda-stdlib\footnote{\url{https://github.com/agda/agda-stdlib}} v2.0 and agda-categories\footnote{\url{https://github.com/agda/agda-categories}} v0.2.0

Before diving into the formalization, it is prudent to clearly show the correspondence between category theory terms and functional programming terms that I use interchangeably.
This can be seen in \autoref{tab:trans_table}
\begin{table}[h]
  \centering
  \begin{tabular}{|l|l|}\hline
    \textbf{category theory} & \textbf{functional programming} \\\hline
    catamorphism             & fold                            \\
    anamorphism              & unfold                          \\
    F-algebra                & algebra                         \\
    F-coalgebra              & coalgebra                       \\
    F-algebra initiality     & universal property of folds     \\
    F-coalgebra terminality  & universal property of unfolds   \\\hline
  \end{tabular}
  \caption{The above tables matches category theoretical terms to functional programming terms.}
  \label{tab:trans_table}
\end{table}
The discussion about my implementation can be found in \autoref{sec:agda_form_disc}

\input{sections/42_category_theory.tex}
\input{sections/44_shortcut_fusion.tex}
\input{sections/46_discussion_agda.tex}
